<!DOCTYPE HTML>
<html>
  <head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Pohyb po mapě</title>
  </head>
  <body>
    <div id="container" style="width: 1000px; height: 500px; border: 1px solid black;"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.7.2.min.js"></script>	
	<script defer="defer">
		/*ds = 50;
		pocet_sloupcu = 100;
		pocet_radku = 100; 
		
		*při velkém množství polygonů se "seká"
		*/
		
		ds = prompt("Zadej délku strany v px: (50)");;
		pocet_sloupcu = prompt("Zadej počet sloupců: (20)");
		pocet_radku = prompt("Zadej počet řádků: (30)");
		
		pocet = pocet_sloupcu * pocet_radku;
			var fromLeft;
			var vykr_sloupcu = 0;
			var vykr_radku = -1;
			x = 0.86 * ds;
			y = 0.5 * ds;
		
		var stage = new Kinetic.Stage({
			container: 'container',
			width: 1000,
			height: 500,
			draggable: true
		});
		
		var layer = new Kinetic.Layer();
		for(var i = 1; i <= pocet; i++ ){	
		
		if(vykr_sloupcu == pocet_sloupcu){
				vykr_sloupcu = 0;
				vykr_radku ++;
		}
	
		
		fromLeft = 2*x*vykr_sloupcu;
		fromTop = y*vykr_radku;
		
		if(vykr_radku%2){	//lichy radek
			fromLeft = fromLeft-x;
		}
		
			var poly = new Kinetic.Polygon({
			points: [fromLeft, y+fromTop, x+fromLeft,fromTop, 2*x+fromLeft, y+fromTop, x+fromLeft, 2*y+fromTop],
			fill: '#7EB12C',
			stroke: '#5f9900',
			strokeWidth: 1
		});
		
		var identifikator = new Kinetic.Text({
			x: fromLeft+(0.7*ds),
			y: fromTop+(0.4*ds),
			text: i,
			fontSize: 10,
			fontFamily: 'Calibri',
			fill: 'red'
		});	
		vykr_sloupcu ++; 
		
		// add the shape to the layer
		layer.add(poly);
		layer.add(identifikator);
	}
      // add the layer to the stage
      stage.add(layer);
    </script>

  </body>
</html>
